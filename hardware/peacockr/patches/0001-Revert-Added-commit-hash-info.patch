From 822bffd30ba82571e5866b9540e507ea3a433ba5 Mon Sep 17 00:00:00 2001
From: Michal Hrusecky <michal.hrusecky@turris.com>
Date: Fri, 12 Sep 2025 11:35:48 +0200
Subject: [PATCH] Revert "Added commit hash info"

This reverts commit c3db1059344c12c5cb5f61c4de3c7bde3cac29ab.

There is no git repository in the build system to get info from.
---
 Cargo.lock  | 58 -----------------------------------------------------
 Cargo.toml  |  1 -
 build.rs    |  1 -
 src/main.rs |  6 ------
 4 files changed, 66 deletions(-)

diff --git a/Cargo.lock b/Cargo.lock
index b07d23f..cd64024 100644
--- a/Cargo.lock
+++ b/Cargo.lock
@@ -646,16 +646,6 @@ dependencies = [
  "cfg_aliases",
 ]
 
-[[package]]
-name = "build-data"
-version = "0.3.3"
-source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "22e6d5ca7a4989b90a9fafea85ce3c8bc9f0e0a76edcdcb330fe0c4fda92251f"
-dependencies = [
- "chrono",
- "safe-regex",
-]
-
 [[package]]
 name = "built"
 version = "0.7.7"
@@ -3782,7 +3772,6 @@ dependencies = [
  "assert2",
  "bimap",
  "bitflags 2.9.3",
- "build-data",
  "calloop 0.14.3",
  "cap-std",
  "chrono",
@@ -4397,53 +4386,6 @@ version = "1.0.20"
 source = "registry+https://github.com/rust-lang/crates.io-index"
 checksum = "28d3b2b1366ec20994f1fd18c3c594f05c5dd4bc44d8bb0c1c632c8d6829481f"
 
-[[package]]
-name = "safe-proc-macro2"
-version = "1.0.95"
-source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "492d1a72624b0bd5b7f0193ea5834a1905534a517573a117e949e895f342906c"
-dependencies = [
- "unicode-xid",
-]
-
-[[package]]
-name = "safe-quote"
-version = "1.0.40"
-source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "bcaa9a650f2f98ba4da0190623210c85945cb78b262709f606c57655eda173e1"
-dependencies = [
- "safe-proc-macro2",
-]
-
-[[package]]
-name = "safe-regex"
-version = "0.3.0"
-source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "5194fafa3cb9da89e0cab6dffa1f3fdded586bd6396d12be11b4cae0c7ee45c2"
-dependencies = [
- "safe-regex-macro",
-]
-
-[[package]]
-name = "safe-regex-compiler"
-version = "0.3.0"
-source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "e822ae1e61251bcfd698317c237cf83f7c57161a5dc24ee609a85697f1ed15b3"
-dependencies = [
- "safe-proc-macro2",
- "safe-quote",
-]
-
-[[package]]
-name = "safe-regex-macro"
-version = "0.3.0"
-source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "2768de7e6ef19f59c5fd3c3ac207ef12b68a49f95e3172d67e4a04cfd992ca06"
-dependencies = [
- "safe-proc-macro2",
- "safe-regex-compiler",
-]
-
 [[package]]
 name = "same-file"
 version = "1.0.6"
diff --git a/Cargo.toml b/Cargo.toml
index 3c7d9ac..c3cae8a 100644
--- a/Cargo.toml
+++ b/Cargo.toml
@@ -50,7 +50,6 @@ default-features = false
 features         = ["compat-1-2", "std", "log", "serde"]
 
 [build-dependencies]
-build-data  = "0.3"
 slint-build = "<1.12"
 
 [dev-dependencies]
diff --git a/build.rs b/build.rs
index 7062a3e..f5ddd5d 100644
--- a/build.rs
+++ b/build.rs
@@ -3,5 +3,4 @@ fn main() {
 		slint_build::CompilerConfiguration::new().with_style("cupertino-dark".into());
 
 	slint_build::compile_with_config("ui/app.slint", config).expect("Slint build failed");
-	build_data::set_GIT_COMMIT().unwrap();
 }
diff --git a/src/main.rs b/src/main.rs
index ada1b76..986d224 100644
--- a/src/main.rs
+++ b/src/main.rs
@@ -43,12 +43,6 @@ fn main() -> Result<(), ProgramError> {
 		.with(tracing_subscriber::EnvFilter::from_default_env())
 		.init();
 
-	info!(
-		commit_hash = env!("GIT_COMMIT"),
-		version = env!("CARGO_PKG_VERSION"),
-		"Peacockr Build Info"
-	);
-
 	set_screen_brightness(true);
 
 	let _ = cap_std::fs_utf8::Dir::create_ambient_dir_all(
-- 
2.51.0

